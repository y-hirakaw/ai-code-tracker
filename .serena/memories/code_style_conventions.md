# コードスタイルとコンベンション

## Goコーディング規約

### 基本スタイル
- **フォーマット**: `go fmt`を使用した標準的なGoフォーマット
- **命名規則**: Go標準のキャメルケース
  - パブリック: `CheckpointManager`, `NewCheckpointManager`
  - プライベート: `baseDir`, `collectNumstatData`
- **構造体**: シンプルで明確なフィールド定義
- **コンストラクタ**: `New`プレフィックス付きファクトリ関数

### パッケージ構造
- **internal/**: プライベートパッケージ（外部から使用不可）
- **cmd/**: CLIエントリーポイント
- **パッケージ名**: シンプルで短い名前（`tracker`, `storage`, `git`, `period`）

### エラーハンドリング
- Go標準のエラーハンドリングパターン
- エラーは最後の戻り値として返す
- エラーラッピング（`fmt.Errorf`）を適切に使用

### テスト
- **テストファイル**: `*_test.go`サフィックス
- **テスト関数**: `Test`プレフィックス
- **包括的テスト**: 89.3%のテストカバレッジ（period パッケージ）
- **エラーケーステスト**: 専用の`error_handling_test.go`ファイル

### JSON処理
- **データ形式**: 軽量なJSONL形式
- **構造体タグ**: 標準的な`json`タグを使用
- **シリアライゼーション**: 標準ライブラリの`encoding/json`

### ファイル命名
- **機能別**: 機能ごとにファイルを分割（`checkpoint.go`, `analyzer.go`）
- **テスト分離**: ロジック別にテストファイルを分割
- **JSONL専用**: 新機能は別ファイル（`analyzer_jsonl.go`）

### インターフェース設計
- **構造体ベース**: インターフェースよりも具象型を優先
- **メソッドレシーバ**: ポインターレシーバを使用（状態変更時）
- **パッケージ内凝集**: 関連機能を同一パッケージにまとめる

### 依存関係
- **標準ライブラリのみ**: 外部依存なし
- **軽量設計**: シンプルで高速な実装
- **クロスプラットフォーム**: macOS、Linux、Windows対応